<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>زاد المؤمن</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f3f6f4;
    color: #222;
    transition: background 0.3s, color 0.3s;
  }
  body.dark-mode {
    background-color: #121212;
    color: #eee;
  }
  header {
    position: fixed;
    top: 0;
    width: 100%;
    background-color: #1e8e3e;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    z-index: 1000;
  }
  header h1 {
    margin: 0;
    font-size: 1.3em;
  }
  .menu {
    cursor: pointer;
    font-size: 1.5em;
    position: relative;
  }
  .menu ul {
    display: none;
    position: absolute;
    top: 35px;
    right: 0;
    background: white;
    list-style: none;
    padding: 10px;
    border-radius: 6px;
    box-shadow: 0 1px 5px rgba(0,0,0,0.3);
    z-index: 1001;
  }
  .menu ul li {
    padding: 8px 12px;
    cursor: pointer;
  }
  .menu ul li:hover {
    background: #eee;
  }
  main {
    margin-top: 60px;
    padding: 15px;
  }
  .carousel {
    display: flex;
    overflow-x: auto;
    padding-bottom: 10px;
    margin-bottom: 20px;
    scrollbar-width: none;
  }
  .carousel::-webkit-scrollbar {
    display: none;
  }
  .circle {
    flex: 0 0 auto;
    width: 80px;
    height: 80px;
    margin: 0 8px;
    background-color: #1e8e3e;
    color: white;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
  }
  .circle.active {
    transform: scale(1.2);
    background-color: #146b2b;
  }
  .azkar-box {
    background: white;
    border-radius: 10px;
    padding: 15px;
    min-height: 120px;
    font-size: 1.1em;
    box-shadow: 0 1px 5px rgba(0,0,0,0.2);
    margin-bottom: 15px;
  }
  .controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1em;
  }
  .controls button {
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    background: #1e8e3e;
    color: white;
    cursor: pointer;
    font-size: 1em;
  }
  .controls span {
    flex: 1;
    text-align: center;
  }
  .counter {
    margin-top: 5px;
    text-align: center;
    font-size: 0.9em;
    color: #555;
  }
  body.dark-mode .azkar-box {
    background: #1f1f1f;
    color: #eee;
  }
  body.dark-mode .circle {
    background-color: #146b2b;
  }
  body.dark-mode .controls button {
    background-color: #146b2b;
  }
</style>
</head>
<body>

<header>
  <h1>زاد المؤمن</h1>
  <div class="menu" id="menu-btn">⋮
    <ul id="menu-list">
      <li id="toggle-dark">الوضع الليلي</li>
      <li id="share-page">مشاركة</li>
      <li id="refresh-page">تحديث</li>
    </ul>
  </div>
</header>

<main>
  <div class="carousel" id="carousel"></div>

  <div class="azkar-box" id="azkar-box">اختر ذكر من الأعلى</div>

  <div class="controls">
    <button id="prev">السابق</button>
    <span id="current-info">0 / 0</span>
    <button id="next">التالي</button>
  </div>

  <div class="counter" id="repeat-counter"></div>
</main>

<script>
/* ===============================
   ضع محتوى JSON الخاص بالأذكار هنا
=============================== */
const azkarData = [
  // مثال:
  // { "text": "أذكار الصباح ...", "repeat": 1 }
];

let currentIndex = 0;

/* ===============================
   الدالة لعرض كل الدوائر في الشريط
=============================== */
function renderCarousel() {
  const carousel = document.getElementById('carousel');
  carousel.innerHTML = '';
  azkarData.forEach((a, index) => {
    const circle = document.createElement('div');
    circle.className = 'circle';
    circle.innerText = index + 1;
    circle.addEventListener('click', () => {
      currentIndex = index;
      updateAzkar();
    });
    carousel.appendChild(circle);
  });
}

/* ===============================
   عرض الذكر الحالي
=============================== */
function updateAzkar() {
  if(azkarData.length === 0) return;
  const box = document.getElementById('azkar-box');
  const info = document.getElementById('current-info');
  const counter = document.getElementById('repeat-counter');

  box.innerText = azkarData[currentIndex].text;
  info.innerText = `${currentIndex + 1} / ${azkarData.length}`;
  
  if(azkarData[currentIndex].repeat && azkarData[currentIndex].repeat > 1) {
    counter.innerText = `عدد التكرار: ${azkarData[currentIndex].repeat}`;
  } else {
    counter.innerText = '';
  }

  // تفعيل الدائرة النشطة
  document.querySelectorAll('.circle').forEach((c, i) => {
    c.classList.toggle('active', i === currentIndex);
  });
}

/* ===============================
   أزرار التحكم
=============================== */
document.getElementById('prev').addEventListener('click', () => {
  if(currentIndex > 0) currentIndex--;
  updateAzkar();
});

document.getElementById('next').addEventListener('click', () => {
  if(currentIndex < azkarData.length -1) currentIndex++;
  updateAzkar();
});

/* ===============================
   قائمة الثلاث نقاط
=============================== */
const menuBtn = document.getElementById('menu-btn');
const menuList = document.getElementById('menu-list');
menuBtn.addEventListener('click', () => {
  menuList.style.display = menuList.style.display === 'block' ? 'none' : 'block';
});

document.getElementById('toggle-dark').addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');
  menuList.style.display = 'none';
});

document.getElementById('share-page').addEventListener('click', () => {
  if(navigator.share){
    navigator.share({title:'زاد المؤمن', url: window.location.href});
  } else {
    alert('شارك الرابط يدوياً: ' + window.location.href);
  }
  menuList.style.display = 'none';
});

document.getElementById('refresh-page').addEventListener('click', () => {
  location.reload();
  menuList.style.display = 'none';
});

/* ===============================
   البدء
=============================== */
renderCarousel();
updateAzkar();

</script>

</body>
</html>
